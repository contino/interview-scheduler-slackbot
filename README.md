![CI](https://github.com/contino/interview-scheduler-slackbot/workflows/CI/badge.svg?branch=master)
# interview-scheduler-slackbot ðŸ¤–

## What does this bot do?

Makes scheduling interview slots for the coming week super easy. Pull out your phone, look at the client calendar and pick a slot, the bot will create the event on the Interview Availability calendar ðŸ¤¯. The bot will make sure the suggested slots are from your free time.

# Installation

You need four things to run the slackbot locally:

1) Google Calendar API credentials

2) Your own Slack Workspace for bot development

3) A Slack app in the workspace created above

4) ngrok

## Download credentials for the Google Calendar API

Go to the page below and click on the `Enable Google Calendar API` button. Download the client config `credentials.json` from the dialog box.

https://developers.google.com/calendar/quickstart/python

## Create a Slack workspace

Click on the link below and use your personal personal email address (not Contino!) to create a development workspace. Setting up the workspace should be super straight-forward.

https://slack.com/create#email

## Configure Slack App on the Slack API console

1) Once you are done setting up the workspace, head over to https://api.slack.com/apps and click on create a new app.

2) Next, enable interactive components. This feature lets our bot respond to user actions like button clicks.

3) Do not worry about the `Request URL`. Leave it empty for now, we will get back to that later.

4) Click on OAuth & Permissions and scroll down to Scopes (Bot Token Scopes). Click on `Add an Oauth Scope` and add the scopes from the image below.

Insert bot scopes image

5) Click on `Install App` button on the sidebar and install app to the workspace you created.

## Setup local development environment

1) Click on `Basic Information` button and scroll down to the credentials, we will need to set `SLACK_BOT_TOKEN` and `SLACK_VERIFICATION_TOKEN` as env vars on our dev environment.

```
export SLACK_BOT_TOKEN='xoxb-blah-blah'
export SLACK_VERIFICATION_TOKEN='blurph-blurph'
export INTERVIEW_AVAIL_CAL='you@email.com'
```

2) Install Python 3.7 (figure it out)

3) Install ngrok. Installation instructions: https://ngrok.com/download

5) Once you are done installing it, run `ngrok http 5000`. Ngrok exposes your application endpoint to the internet.

6) Copy the URL generated by ngrok, either http or https.

7) Paste the URL into the interactive components `Request URL` section. (The form we left empty in step2 in the section above)

8) Our application listens on `/slack/message_actions` endpoint so we need to add this to the end of the URL we pasted above.

9) We should be good to go now, run `python3 app.py local` and if the flask server has started successfully, You should see a dm from the bot in your new workspace.
